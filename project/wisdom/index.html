<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>智美体育集团</title>
    <link rel="stylesheet" href="./css/style.css" type="text/css">
    <script src="js/jquery-2.2.3.min.js"></script>
</head>
<body>
<div id="wisdom-contaioner">
    <div id="wisdom-top">
        <div class="stock">香港证券交易所</div>
        <div class="action">
            <ul>
                <li>
                    <form action="">
                        <input class="search skew-16" type="search">
                    </form>
                </li>
                <li class="search"><img src="./images/search-ico.png" alt=""></li>
                <li>简</li>
                <li>繁</li>
                <li>en</li>
            </ul>
        </div>
    </div>
    <div id="wisdom-nav">
        <div class="logo skew-16">
            <a href="#"><img src="./images/logo.png" alt=""></a>
        </div>
        <div class="navbar skew-16">
            <ul class="levelOne clearfix">
                <li class="skew-16 liOne">
                    <p>
                        <a href="">关于智美</a>
                    </p>
                    <ul class="levelTwo clearfix skew-16">
                        <li class="skew-16"><a href="">集团简介</a></li>
                        <li class="skew-16"><a href="">企业文化</a></li>
                        <li class="skew-16"><a href="">企业文化</a></li>
                        <li class="skew-16"><a href="">董事会主席致辞</a></li>
                        <li class="skew-16"><a href="">管理层介绍</a></li>
                        <li class="skew-16"><a href="">大事记</a></li>
                    </ul>
                </li>
                <li class="skew-16 liOne">
                    <p><a href="">智美版图</a></p>
                    <ul class="levelTwo clearfix skew-16">
                        <li class="skew-16"><a href="">战略规划</a></li>
                        <li class="skew-16"><a href="">集团架构</a></li>
                        <li class="skew-16"><a href="">产业布局</a></li>
                    </ul>
                </li>
                <li class="skew-16 liOne">
                    <p><a href="">集团业务</a></p>
                    <ul class="levelTwo clearfix skew-16">
                        <li class="skew-16"><a href="">体育赛事运营</a></li>
                        <li class="skew-16"><a href="">体育服务</a></li>
                        <li class="skew-16"><a href="">体育营销</a></li>
                        <li class="skew-16"><a href="">体育传媒</a></li>
                    </ul>
                </li>
                <li class="skew-16 liOne">
                    <p><a href="">合作伙伴</a></p>
                    <ul class="levelTwo clearfix skew-16">
                        <li class="skew-16"><a href="">国内合作组织</a></li>
                        <li class="skew-16"><a href="">国际组织</a></li>
                        <li class="skew-16"><a href="">甜瓜马拉松</a></li>
                    </ul>
                </li>
                <li class="skew-16 liOne">
                    <p><a href="">投资者关系</a></p>
                    <ul class="levelTwo clearfix skew-16">
                        <li class="skew-16"><a href="">招股书</a></li>
                        <li class="skew-16"><a href="">券商研报</a></li>
                        <li class="skew-16"><a href="">公告与通函</a></li>
                        <li class="skew-16"><a href="">联系方式</a></li>
                    </ul>
                </li>
                <li class="skew-16 liOne">
                    <p><a href="">集团新闻</a></p>
                    <ul class="levelTwo clearfix skew-16">
                        <li class="skew-16"><a href="">集团新闻</a></li>
                    </ul>
                </li>
                <li class="skew-16 liOne">
                    <p><a href="">招贤纳士</a></p>
                    <ul class="levelTwo clearfix skew-16">
                        <li class="skew-16"><a href="">赛事项目总监</a></li>
                        <li class="skew-16"><a href="">销售总监</a></li>
                        <li class="skew-16"><a href="">财务总监</a></li>
                        <li class="skew-16"><a href="">法务经理</a></li>
                        <li class="skew-16"><a href="">新媒体运营总监</a></li>
                        <li class="skew-16"><a href="">审计部长</a></li>
                        <li class="skew-16"><a href="">总账会计</a></li>
                        <li class="skew-16"><a href="">数据营销中心总经理</a></li>
                        <li class="skew-16"><a href="">赛事运营总经理</a></li>
                    </ul>
                </li>
                <li class="skew-16 liOne"><a href="">联系我们</a></li>
            </ul>
        </div>
    </div>
    <div id="wisdom-slider">
        <div class="carousel">
            <ul class="img-ct">
                <li data-index=0>
                    <a href=""><img src="./images/banner1.jpg"></a>
                </li>
                <li data-index=1>
                    <a href=""><img src="./images/banner2.jpg"></a>
                </li>
                <li data-index=2>
                    <a href=""><img src="./images/banner3.jpg"></a>
                </li>
            </ul>
            <a class="btn btn-pre" href="#">&lt;</a>
            <a class="btn btn-next" href="#">&gt;</a>
            <div class="bullet-ct">
                <ul class="bullet">
                    <li class="active"></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="wisdom-join">
        <span>开赛倒计时</span>
        <!--<ul class="clearfix">-->
            <!--<li>-->
                <!--<i class="days">00</i>-->
                <!--Days-->
            <!--</li>-->
            <!--<li>-->
                <!--<i class="hr">00</i>-->
                <!--Hr-->
            <!--</li>-->
            <!--<li>-->
                <!--<i class="min">00</i>-->
                <!--Min-->
            <!--</li>-->
            <!--<li>-->
                <!--<i class="sec">00</i>-->
                <!--Sec-->
            <!--</li>-->
        <!--</ul>-->
        <span>
            广州马拉松
            <a href="">&gt;</a>
        </span>
    </div>
    <div id="wisdom-activities">
        <div class="activitiesWrap">
            <ul class="clearfix">
                <li>
                    <img src="./images/1-151026160509143.png" alt="">
                    <div class=""></div>
                </li>
                <li><img src="./images/1-15110915405a36.png" alt=""></li>
                <li><img src="./images/1-1510161H40Q11.jpg" alt=""></li>
                <li><img src="./images/1-150RQ4493U46.png" alt=""></li>
            </ul>
        </div>
    </div>
    <div id="wisdom-sites">
        <ul class="sites">
            <li><a href=""></a></li>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
            <li><a href=""></a></li>
        </ul>
    </div>
</div>
<div id="footer">
    <div class="blank"></div>
    <div class="footer-mark">
        <span>Copyright© 2013－2015 智美体育集团 版权所有 京ICP备11007262-2号</span>
        <ul>
            <li class="skew-16"><img src="./images/weixin.png" alt=""></li>
            <li class="skew-16"><img src="./images/weibo.png" alt=""></li>
        </ul>
    </div>

</div>

<script>

    $(function () {

        //搜索
        $('.search').on('click', function (event) {

        });
        //二级菜单切换
        $('.levelOne .liOne').each(function () {
            $(this).hover(function (e) {
                var index = [].indexOf.call($('.levelOne .liOne'),e.target);
                console.log('index:'+index);
                if (index == 6) {
                    $(this).find('.levelTwo').css({
                        'display':'block',
                        'left':'-400px'
                    })
                } else {
                    $(this).find('.levelTwo').css({
                        'display':'block'
                    })
                }
            },function (e) {
                $(this).find('.levelTwo').css({
                    'display':'none'
                })
            });
        })

        //四个方向划入效果
            console.log('is here 1');

            var $li = $('.activitiesWrap li');
            $li.hover(function(e){
                console.log('is here 2');
                move.call(this,e,true);
            },function(e){
                move.call(this,e,false);
            });

            function move(e,bool){
                var liTop = $(this).offset().top;
                var liLeft = $(this).offset().left;
                var liBottom = liTop + $(this).height();
                var liRight = liLeft + $(this).width();

                //获取鼠标的坐标
                var ev = e || window.event;
                var pagex = ev.pageX;
                var pagey = ev.pageY;

                //获取鼠标距离四条边的距离
                var jtop = Math.abs(pagey - liTop);
                var jbottom = Math.abs(pagey - liBottom);
                var jleft = Math.abs(pagex - liLeft);
                var jright = Math.abs(pagex - liRight);
                console.log(jleft+"--"+jtop)
                //获取四个值中的最小值，判断进入的方向
                var min = Math.min(jtop,jbottom,jleft,jright);
                console.log('min:'+ min);

                switch(min){
                    case jtop:
                        if(bool){
                            $(this).find(".cover").css({
                                top:"-360px",
                                left:0
                            }).stop().animate({
                                top:"0"
                            });
                        }else{
                            $(this).find(".cover").stop().animate({
                                top:"-360px"
                            });
                        }
                        break;

                    case jleft:
                        if(bool){
                            $(this).find(".cover").css({
                                left:"-360px",
                                top:0
                            }).stop().animate({
                                left:"0"
                            });
                        }else{
                            $(this).find(".cover").stop().animate({
                                left:"-360px"
                            });
                        }
                        break;

                    case jbottom:
                        if(bool){
                            $(this).find(".cover").css({
                                top:"360px",
                                left:0
                            }).stop().animate({
                                top:"0"
                            });
                        }else{
                            $(this).find(".cover").stop().animate({
                                top:"360px"
                            });
                        }
                        break;

                    case jright:
                        if(bool){
                            $(this).find(".cover").css({
                                left:"360px",
                                top:0
                            }).stop().animate({
                                left:"0"
                            });
                        }else{
                            $(this).find(".cover").stop().animate({
                                left:"360px"
                            });
                        }
                        break;
                }
            }


        console.log('is here 3');



        //    轮播组件
            function Carousel($ct) {
                this.$ct = $ct;
                this.init();
                this.bind();
            }
            Carousel.prototype.init = function() {
                var $imgCt = this.$imgCt = this.$ct.find('.img-ct'),
                        $preBtn = this.$preBtn = this.$ct.find('.btn-pre'),
                        $nextBtn = this.$nextBtn = this.$ct.find('.btn-next'),
                        $bullet = this.$bullet = this.$ct.find('.bullet');

                var $firstImg = $imgCt.find('li').first(),
                        $lastImg = $imgCt.find('li').last();
                this.curPageIndex = 0;
                this.imgLength = $imgCt.children().length;
                this.isAnimate = false;
                this.imgWidth = $firstImg.width();
                this.autoShow = true;

                //自动滚动
                if (this.autoShow) {
                    setInterval(function () {
                        $nextBtn.click();

                    },3500)
                }

                $imgCt.prepend($lastImg.clone())
                $imgCt.append($firstImg.clone())

                $imgCt.width($firstImg.width() * this.$imgCt.children().length)
                $imgCt.css({
                    'left': '-'+$firstImg.width()
                })
            }
            Carousel.prototype.bind = function() {
                var _this = this;
                this.$preBtn.on('click', function(e) {
                    e.preventDefault();
                    _this.playPre();
                })

                this.$nextBtn.on('click', function(e) {
                    e.preventDefault();
                    _this.playNext();
                })
            }
            Carousel.prototype.playPre = function() {
                var _this = this;
                if (this.isAnimate) return;
                this.isAnimate = true;
                this.$imgCt.animate({
                    left: '+='+_this.imgWidth
                }, function() {
                    _this.curPageIndex--;
                    if (_this.curPageIndex < 0) {
                        _this.$imgCt.css('left', -(_this.imgLength * _this.imgWidth));
                        _this.curPageIndex = _this.imgLength - 1
                        console.log('上一个'+ _this.curPageIndex);
                    }
                })
                this.isAnimate = false;
                this.setBullet()
            }
            Carousel.prototype.playNext = function() {
                var _this = this;
                if (this.isAnimate) return;
                this.isAnimate = true;
                this.$imgCt.animate({
                    left: '-='+_this.imgWidth
                }, function() {
                    _this.curPageIndex++;
                    console.log('_this.curPageIndex 1:'+_this.curPageIndex);
                    if (_this.curPageIndex === _this.imgLength) {
                        console.log('_this.imgWidth:'+_this.imgWidth)
                        _this.$imgCt.css({
                            'left': '-'+_this.imgWidth
                        })
                        _this.curPageIndex = 0
                    }
                })
                _this.isAnimate = false;
                _this.setBullet();
            }
            Carousel.prototype.setBullet = function() {
                var _this = this;
                console.log('_this.curPageIndex 2:'+_this.curPageIndex)
                this.$bullet.children()
                        .removeClass('active')
                        .eq(this.curPageIndex)
                        .addClass('active')
            }

            $('.carousel').each(function () {
                new  Carousel($(this));
            })










    })

</script>

</body>
</html>